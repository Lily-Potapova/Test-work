# Техзадание 3

Этот Docker-образ содержит набор специализированных программ для работы с биоинформатическими данными, а так же скрипт, который определяет референсный и альтернативный аллели.

## Специализированные программы

В Docker-образе установлены следующие программы:

- **samtools** (версия 1.21) — утилиты для работы с SAM/BAM/CRAM файлами.
- **htslib** (версия 1.21) — библиотека для работы с высокопроизводительными sequencing данными.
- **bcftools** (версия 1.21) — утилиты для работы с VCF/BCF файлами.
- **vcftools** (версия 0.1.16) — инструменты для работы с VCF файлами.
- **convert_to_ref_alt.py** — скрипт для определения референсных и альтернативных аллелей.

## Предподготовка файла

Для предподготовки был создан yml файл, который можно запустить с помощью вкладки Acshons на сайте GitHub или использовать команду:

```bash
awk 'BEGIN { FS="[ \t]+"; print "#CHROM\tPOS\tID\tallele1\tallele2"; } { if ($1 ~ /^rs#/) next; if ($2 == 23) next; chrom = "chr" $2; id = "rs" $1; pos = $4; print chrom "\t" pos "\t" id "\t" $5 "\t" $6; }' FP_SNPs.txt > FP_SNPs_10k_GB38_twoAllelsFormat.tsv
```

## Сборка Docker-образа

Чтобы собрать Docker-образ, выполните следующую команду в терминале (вы можете поменять название вашего образа, при запуске этой команды в диретории вашего контэйнера должен быть референсный геном и скрипт):

```bash
docker build -t snp-converter -f /*ваша директория*/Dockerfile.ubuntu /*ваша директория*/
```

## Запуск Docker-контейнера

Чтобы запустить контейнер и скрипт, выполните команду (не забудьте поменять название образа, если сдели это ранее):

```bash
docker run -v /*ваша директория*/FP_SNPs_10k_GB38_twoAllelsFormat.tsv:/app/FP_SNPs_10k_GB38_twoAllelsFormat.tsv \
           -v /*ваша директория*:/app/out \
           snp-converter \
           python3 /app/convert_to_ref_alt.py \
           -i /app/FP_SNPs_10k_GB38_twoAllelsFormat.tsv \
           -o /app/out/FP_SNPs_10k_GB38_REF_ALT.tsv \
           -r /app/ref/GRCh38.d1.vd1_mainChr/sepChrs/
```
